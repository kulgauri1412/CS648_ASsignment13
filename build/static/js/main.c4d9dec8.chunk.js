(this.webpackJsonpAssignment13=this.webpackJsonpAssignment13||[]).push([[0],{14:function(e,t,n){},15:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),c=n(7),r=n.n(c),l=(n(14),n(2)),i=n(3),s=n(1),u=n(5),d=n(4),h=n(8),p=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).handleChange=a.handleChange.bind(Object(s.a)(a)),a}return Object(i.a)(n,[{key:"handleChange",value:function(e){var t=e.target.value,n=e.target.name;this.props.onFilter(Object(h.a)({},n,t))}},{key:"render",value:function(){return o.a.createElement("form",null,o.a.createElement("input",{type:"text",className:"form-control",placeholder:"Search...",name:"filterText",onChange:this.handleChange}))}}]),n}(a.Component),m=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).destroy=a.destroy.bind(Object(s.a)(a)),a.modify=a.modify.bind(Object(s.a)(a)),a}return Object(i.a)(n,[{key:"destroy",value:function(){this.props.onDestroy(this.props.product.productid)}},{key:"modify",value:function(){this.props.onModify(this.props.product.productid)}},{key:"render",value:function(){return o.a.createElement("tr",null,o.a.createElement("td",null,this.props.product.name),o.a.createElement("td",null,this.props.product.category),o.a.createElement("td",null,this.props.product.price),o.a.createElement("td",null,!0===this.props.product.instock?"In Stock":"Out Of Stock"),o.a.createElement("td",{className:"text-right"},o.a.createElement("button",{onClick:this.modify,className:"btn btn-info"},"Modify")),o.a.createElement("td",{className:"text-right"},o.a.createElement("button",{onClick:this.destroy,className:"btn btn-info"},"Delete")))}}]),n}(a.Component),f=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).handleDestroy=a.handleDestroy.bind(Object(s.a)(a)),a.handleModify=a.handleModify.bind(Object(s.a)(a)),a}return Object(i.a)(n,[{key:"handleDestroy",value:function(e){this.props.onDestroy(e)}},{key:"handleModify",value:function(e){this.props.onModify(e)}},{key:"render",value:function(){var e=this,t=Object.keys(this.props.products).map((function(t){return e.props.products[t]})),n=[];return t.forEach((function(t){-1!==t.name.indexOf(e.props.filterText)&&n.push(o.a.createElement(m,{product:t,key:t.productid,onDestroy:e.handleDestroy,onModify:e.handleModify}))})),o.a.createElement("div",null,o.a.createElement("table",{className:"table table-striped table-sm"},o.a.createElement("thead",{className:"thead-dark"},o.a.createElement("tr",null,o.a.createElement("th",null,"Name"),o.a.createElement("th",null,"Category"),o.a.createElement("th",null,"Price"),o.a.createElement("th",null,"Stock Status"),o.a.createElement("th",null),o.a.createElement("th",null))),o.a.createElement("tbody",null,n)))}}]),n}(a.Component),b={productid:"",category:"",price:"",name:""},v=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).handleChange=a.handleChange.bind(Object(s.a)(a)),a.handleSave=a.handleSave.bind(Object(s.a)(a)),a.fillForm=a.fillForm.bind(Object(s.a)(a)),a.handleOptionChange=a.handleOptionChange.bind(Object(s.a)(a)),a.state={action:"Save",product:Object.assign({},b),errors:{},selectedOption:"In Stock"},a}return Object(i.a)(n,[{key:"handleOptionChange",value:function(e){this.setState({selectedOption:e.target.value});var t=e.target.value;this.setState((function(e){return e.product.instock="In Stock"===t,{product:e.product}}))}},{key:"fillForm",value:function(e){this.setState({product:e,action:"Update"})}},{key:"handleChange",value:function(e){var t=e.target,n=t.value,a=t.name;this.setState((function(e){return e.product[a]=n,{product:e.product}}))}},{key:"handleSave",value:function(e){"Save"===this.state.action?this.props.onSave(this.state.product):"Update"===this.state.action&&this.props.onUpdate(this.state.product),this.setState({product:Object.assign({},b),errors:{},action:"Save"}),e.preventDefault()}},{key:"render",value:function(){return o.a.createElement("form",null,o.a.createElement("h4",null,"Add a new product"),o.a.createElement("p",null,o.a.createElement("label",null,"Name: ",o.a.createElement("br",null),o.a.createElement("input",{type:"text",className:"form-control",name:"name",onChange:this.handleChange,value:this.state.product.name}))),o.a.createElement("p",null,o.a.createElement("label",null,"Category: ",o.a.createElement("br",null),o.a.createElement("input",{type:"text",className:"form-control",name:"category",onChange:this.handleChange,value:this.state.product.category}))),o.a.createElement("p",null,o.a.createElement("label",null,"Price: ",o.a.createElement("br",null),o.a.createElement("input",{type:"text",className:"form-control",name:"price",onChange:this.handleChange,value:this.state.product.price}))),o.a.createElement("div",{className:"form-check"},o.a.createElement("input",{className:"form-check-input",type:"radio",value:"In Stock",checked:!0===this.state.product.instock,onChange:this.handleOptionChange}),o.a.createElement("label",{className:"form-check-label"},"In Stock")),o.a.createElement("div",{className:"form-check"},o.a.createElement("input",{className:"form-check-input",type:"radio",value:"Out Of Stock",checked:!1===this.state.product.instock,onChange:this.handleOptionChange}),o.a.createElement("label",{className:"form-check-label"},"Out Of Stock")),o.a.createElement("br",null),o.a.createElement("input",{type:"submit",className:"btn btn-info",value:this.state.action,onClick:this.handleSave}))}}]),n}(a.Component),y={},E=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).state={filterText:"",products:y},a.handleFilter=a.handleFilter.bind(Object(s.a)(a)),a.handleDestroy=a.handleDestroy.bind(Object(s.a)(a)),a.handleSave=a.handleSave.bind(Object(s.a)(a)),a.handleUpdate=a.handleUpdate.bind(Object(s.a)(a)),a.populateForm=a.populateForm.bind(Object(s.a)(a)),a.child=o.a.createRef(),a}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var e=this;fetch("/product/get").then((function(e){return e.json()})).then((function(t){return e.setState({products:t})}))}},{key:"handleFilter",value:function(e){this.setState(e)}},{key:"handleSave",value:function(e){e.productid=(new Date).getTime(),e.instock=!0,this.setState((function(t){var n=t.products;return n[e.productid]=e,{products:n}}));var t={product:e,id:e.productid};fetch("/product/create",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))}},{key:"handleDestroy",value:function(e){this.setState((function(t){var n=t.products;return delete n[e],{products:n}})),fetch("/product/delete/".concat(e),{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))}},{key:"populateForm",value:function(e){console.log("Update this "+e);var t=this.state.products[e];this.child.current.fillForm(t)}},{key:"handleUpdate",value:function(e){console.log("Updated"),console.log(e),this.setState((function(t){var n=t.products;return n[e.productid]=e,{products:n}}));var t=e.productid,n={product:e,id:t};fetch("/product/update/".concat(t),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(n)}).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("h1",null,"My Inventory"),o.a.createElement(p,{onFilter:this.handleFilter}),o.a.createElement(f,{products:this.state.products,filterText:this.state.filterText,onDestroy:this.handleDestroy,onModify:this.populateForm,onUpdate:this.handleUpdate}),o.a.createElement(v,{onUpdate:this.handleUpdate,onSave:this.handleSave,ref:this.child}))}}]),n}(a.Component);var g=function(){return o.a.createElement("div",null,o.a.createElement(E,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(g,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},9:function(e,t,n){e.exports=n(15)}},[[9,1,2]]]);
//# sourceMappingURL=main.c4d9dec8.chunk.js.map